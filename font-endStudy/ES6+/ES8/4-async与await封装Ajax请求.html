<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>发送 Ajax 请求</title>
</head>
<body>
        <script>
            function sendAJAX(url){

                return new Promise((resolve, reject)=>{
                    //1 .创建对象
                    const x = new XMLHttpRequest( );
                    //2.初始化
                    x.open('GET', url);
                    //3.发送
                    x.send( );
                    //4.绑定事件
                    x.onreadystatechange = function( ){
                        if(x.readyState === 4){
                            if(x.status >= 200 & x.status<300){

                            }
                        }
                    }
                })
            }

            // Promise then 方法测试
            // const result =  sendAJAX("https://www.apache.org/licenses/LICENSE-2.0.html").then(value =>{
            //     console.log(value);
            // }, reason =>{

            // })

            // async 与 await 测试 
            async function main( ){
                // 发送 Ajax 请求
                let result = await sendAJAX("https://www.yiketianqi.com/free/day?appid=82352446&appsecret=zf3Z5w78");
                //再次测试
                let tianqi = await sendAJAX("https://www.yiketianqi.com/free/day?appid=82352446&appsecret=zf3Z5w78&unescape=1");
                console.log(result);
                console.log(tianqi);
            }
            main();
            // console.log(result);
        </script>
</body>
</html>